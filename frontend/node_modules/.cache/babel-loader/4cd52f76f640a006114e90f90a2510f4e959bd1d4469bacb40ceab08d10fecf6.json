{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Chatbot(){const[messages,setMessages]=useState([{text:\"Bonjour ! Je suis votre guide virtuel pour Marrakech. Posez-moi vos questions sur les activités, restaurants ou hôtels.\",sender:\"bot\"}]);const[input,setInput]=useState(\"\");const[loading,setLoading]=useState(false);const chatboxRef=useRef(null);const quickQuestions=[\"Quels sont les meilleurs restaurants?\",\"Où puis-je trouver des hôtels pas chers?\",\"Quelles activités recommandez-vous?\"];const sendMessage=async()=>{if(!input.trim()||loading)return;const userMessage={text:input,sender:\"user\"};setMessages(prev=>[...prev,userMessage]);setInput(\"\");setLoading(true);try{const response=await axios.post(\"https://api-inference.huggingface.co/models/microsoft/DialoGPT-medium\",{inputs:input},{headers:{Authorization:`Bearer ${process.env.REACT_APP_HUGGINGFACE_API_KEY}`,\"Content-Type\":\"application/json\"}});const botResponse=response.data.generated_text||\"Je n’ai pas bien compris. Pouvez-vous reformuler ?\";setMessages(prev=>[...prev,{text:botResponse,sender:\"bot\"}]);}catch(error){console.error(\"Erreur Hugging Face :\",error);setMessages(prev=>[...prev,{text:\"Désolé, une erreur est survenue. Réessayez plus tard.\",sender:\"bot\"}]);}finally{setLoading(false);}};useEffect(()=>{var _chatboxRef$current;(_chatboxRef$current=chatboxRef.current)===null||_chatboxRef$current===void 0?void 0:_chatboxRef$current.scrollTo(0,chatboxRef.current.scrollHeight);},[messages]);return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"Guide Virtuel Marrakech\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.chatbox,ref:chatboxRef,children:[messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{style:msg.sender===\"user\"?styles.userMessage:styles.botMessage,children:msg.text},index)),loading&&/*#__PURE__*/_jsx(\"div\",{style:styles.botMessage,children:\"Je recherche la r\\xE9ponse...\"})]}),/*#__PURE__*/_jsx(\"div\",{style:styles.quickQuestions,children:quickQuestions.map((question,i)=>/*#__PURE__*/_jsx(\"button\",{style:styles.quickBtn,onClick:()=>setInput(question),disabled:loading,children:question},i))}),/*#__PURE__*/_jsxs(\"div\",{style:styles.inputContainer,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:e=>e.key==='Enter'&&sendMessage(),placeholder:\"Posez votre question sur Marrakech...\",style:styles.input,disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,style:styles.button,disabled:loading||!input.trim(),children:loading?\"...\":\"Envoyer\"})]})]});}const styles={container:{maxWidth:\"800px\",margin:\"0 auto\",padding:\"20px\",fontFamily:\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\"},title:{color:\"#e63946\",textAlign:\"center\",marginBottom:\"20px\"},chatbox:{height:\"300px\",border:\"1px solid #ddd\",borderRadius:\"8px\",padding:\"15px\",overflowY:\"auto\",marginBottom:\"15px\",backgroundColor:\"#f8f9fa\"},userMessage:{backgroundColor:\"#e63946\",color:\"white\",padding:\"10px 15px\",borderRadius:\"18px 188px 0 18px\",margin:\"8px 0\",maxWidth:\"80%\",alignSelf:\"flex-end\",wordWrap:\"break-word\"},botMessage:{backgroundColor:\"#f1f1f1\",color:\"#333\",padding:\"10px 15px\",borderRadius:\"18px 18px 18px 0\",margin:\"8px 0\",maxWidth:\"80%\",wordWrap:\"break-word\"},inputContainer:{display:\"flex\",gap:\"10px\"},input:{flex:1,padding:\"12px\",border:\"1px solid #ddd\",borderRadius:\"8px\",fontSize:\"16px\"},button:{padding:\"12px 20px\",backgroundColor:\"#e63946\",color:\"white\",border:\"none\",borderRadius:\"8px\",cursor:\"pointer\",fontSize:\"16px\",transition:\"background-color 0.3s\"},quickQuestions:{display:\"flex\",flexWrap:\"wrap\",gap:\"10px\",marginBottom:\"15px\"},quickBtn:{padding:\"8px 12px\",backgroundColor:\"#f8f9fa\",border:\"1px solid #ddd\",borderRadius:\"20px\",cursor:\"pointer\",fontSize:\"14px\",transition:\"all 0.3s\"}};export default Chatbot;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsx","_jsx","jsxs","_jsxs","Chatbot","messages","setMessages","text","sender","input","setInput","loading","setLoading","chatboxRef","quickQuestions","sendMessage","trim","userMessage","prev","response","post","inputs","headers","Authorization","process","env","REACT_APP_HUGGINGFACE_API_KEY","botResponse","data","generated_text","error","console","_chatboxRef$current","current","scrollTo","scrollHeight","style","styles","container","children","title","chatbox","ref","map","msg","index","botMessage","question","i","quickBtn","onClick","disabled","inputContainer","type","value","onChange","e","target","onKeyPress","key","placeholder","button","maxWidth","margin","padding","fontFamily","color","textAlign","marginBottom","height","border","borderRadius","overflowY","backgroundColor","alignSelf","wordWrap","display","gap","flex","fontSize","cursor","transition","flexWrap"],"sources":["C:/Users/Hajar/Desktop/recommandation-marrakech/frontend/src/pages/Chatbot.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction Chatbot() {\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      text: \"Bonjour ! Je suis votre guide virtuel pour Marrakech. Posez-moi vos questions sur les activités, restaurants ou hôtels.\",\r\n      sender: \"bot\"\r\n    }\r\n  ]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const chatboxRef = useRef(null);\r\n\r\n  const quickQuestions = [\r\n    \"Quels sont les meilleurs restaurants?\",\r\n    \"Où puis-je trouver des hôtels pas chers?\",\r\n    \"Quelles activités recommandez-vous?\"\r\n  ];\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim() || loading) return;\r\n\r\n    const userMessage = { text: input, sender: \"user\" };\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInput(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"https://api-inference.huggingface.co/models/microsoft/DialoGPT-medium\",\r\n        { inputs: input },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${process.env.REACT_APP_HUGGINGFACE_API_KEY}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      const botResponse = response.data.generated_text || \"Je n’ai pas bien compris. Pouvez-vous reformuler ?\";\r\n      setMessages(prev => [...prev, { text: botResponse, sender: \"bot\" }]);\r\n    } catch (error) {\r\n      console.error(\"Erreur Hugging Face :\", error);\r\n      setMessages(prev => [...prev, {\r\n        text: \"Désolé, une erreur est survenue. Réessayez plus tard.\",\r\n        sender: \"bot\"\r\n      }]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    chatboxRef.current?.scrollTo(0, chatboxRef.current.scrollHeight);\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h1 style={styles.title}>Guide Virtuel Marrakech</h1>\r\n      <div style={styles.chatbox} ref={chatboxRef}>\r\n        {messages.map((msg, index) => (\r\n          <div key={index} style={msg.sender === \"user\" ? styles.userMessage : styles.botMessage}>\r\n            {msg.text}\r\n          </div>\r\n        ))}\r\n        {loading && <div style={styles.botMessage}>Je recherche la réponse...</div>}\r\n      </div>\r\n\r\n      <div style={styles.quickQuestions}>\r\n        {quickQuestions.map((question, i) => (\r\n          <button\r\n            key={i}\r\n            style={styles.quickBtn}\r\n            onClick={() => setInput(question)}\r\n            disabled={loading}\r\n          >\r\n            {question}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div style={styles.inputContainer}>\r\n        <input\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\r\n          placeholder=\"Posez votre question sur Marrakech...\"\r\n          style={styles.input}\r\n          disabled={loading}\r\n        />\r\n        <button\r\n          onClick={sendMessage}\r\n          style={styles.button}\r\n          disabled={loading || !input.trim()}\r\n        >\r\n          {loading ? \"...\" : \"Envoyer\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    maxWidth: \"800px\",\r\n    margin: \"0 auto\",\r\n    padding: \"20px\",\r\n    fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\"\r\n  },\r\n  title: {\r\n    color: \"#e63946\",\r\n    textAlign: \"center\",\r\n    marginBottom: \"20px\"\r\n  },\r\n  chatbox: {\r\n    height: \"300px\",\r\n    border: \"1px solid #ddd\",\r\n    borderRadius: \"8px\",\r\n    padding: \"15px\",\r\n    overflowY: \"auto\",\r\n    marginBottom: \"15px\",\r\n    backgroundColor: \"#f8f9fa\",\r\n  },\r\n  userMessage: {\r\n    backgroundColor: \"#e63946\",\r\n    color: \"white\",\r\n    padding: \"10px 15px\",\r\n    borderRadius: \"18px 188px 0 18px\",\r\n    margin: \"8px 0\",\r\n    maxWidth: \"80%\",\r\n    alignSelf: \"flex-end\",\r\n    wordWrap: \"break-word\",\r\n  },\r\n  botMessage: {\r\n    backgroundColor: \"#f1f1f1\",\r\n    color: \"#333\",\r\n    padding: \"10px 15px\",\r\n    borderRadius: \"18px 18px 18px 0\",\r\n    margin: \"8px 0\",\r\n    maxWidth: \"80%\",\r\n    wordWrap: \"break-word\",\r\n  },\r\n  inputContainer: {\r\n    display: \"flex\",\r\n    gap: \"10px\",\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    padding: \"12px\",\r\n    border: \"1px solid #ddd\",\r\n    borderRadius: \"8px\",\r\n    fontSize: \"16px\",\r\n  },\r\n  button: {\r\n    padding: \"12px 20px\",\r\n    backgroundColor: \"#e63946\",\r\n    color: \"white\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"16px\",\r\n    transition: \"background-color 0.3s\",\r\n  },\r\n  quickQuestions: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    gap: \"10px\",\r\n    marginBottom: \"15px\",\r\n  },\r\n  quickBtn: {\r\n    padding: \"8px 12px\",\r\n    backgroundColor: \"#f8f9fa\",\r\n    border: \"1px solid #ddd\",\r\n    borderRadius: \"20px\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"14px\",\r\n    transition: \"all 0.3s\",\r\n  },\r\n};\r\n\r\nexport default Chatbot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}